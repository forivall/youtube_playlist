(function(){(function(b,c){var a=document.createElement("script");a.src=b;var g=document.getElementsByTagName("head")[0],e=false;a.onload=a.onreadystatechange=function(){var f=!this.readyState||this.readyState=="loaded"||this.readyState=="complete";if(!e&&f){e=true;c();a.onload=a.onreadystatechange=null;g.removeChild(a)}};g.appendChild(a)})("//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js",function(){(function(b){b.getScript("https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",
function(){var c=[];b('a[href^="http://www.youtube"]').each(function(){var d=this.href.replace(/^.*v=/,"").replace(/\&.*$/,"");b.inArray(d,c)<0&&c.push(d)});console.log("video ids",c);var a=0,g=function(){a++;if(a>=c.length)a-=c.length},e=null,f=function(){console.log("Playing: ",a,c[a]);e.loadVideoById(c[a])},h=b("<div />",{id:"shadow",css:{"background-color":"black",position:"fixed",left:0,top:0,width:"100%",height:"100%","z-index":1E3}}),i=b("<div />",{id:"player_box",css:{position:"fixed",left:"50%",
top:"50%",width:320,height:240,"margin-left":-160,"margin-top":-120,"z-index":1001}}),j=b("<div />",{id:"playlist_player"}),k=b("<a />",{href:"javascript:;",text:"previous",css:{"float":"left"},onclick:function(){a--;if(a<0)a+=c.length;f()}}),l=b("<a />",{href:"javascript:;",text:"next",css:{"float":"right"},onclick:function(){g();f()}});i.append(j).append(k).append(l);b("body").append(h).append(i);h.css("opacity",0.8);swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid=playlist_player",
"playlist_player","320","240","9.0.0",null,null,{allowScriptAccess:"always"},{id:"playlist_player"});window.onYouTubePlayerReady=function(d){e=document.getElementById(d);e.addEventListener("onStateChange","playerStateChanged");e.addEventListener("onError","playerOnError");f()};window.playerOnError=function(d){console.log("error",d)};window.playerStateChanged=function(d){if(d==0){g();f()}}})})(jQuery.noConflict(true))})})();
