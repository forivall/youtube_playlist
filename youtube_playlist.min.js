(function(){if(typeof console==="undefined")console={log:function(){}};(function(b,c){var a=document.createElement("script");a.src=b;var f=document.getElementsByTagName("head")[0],g=false;a.onload=a.onreadystatechange=function(){var e=!this.readyState||this.readyState=="loaded"||this.readyState=="complete";if(!g&&e){g=true;c();a.onload=a.onreadystatechange=null;f.removeChild(a)}};f.appendChild(a)})("//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js",function(){(function(b){b.getScript("https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",
function(){var c=[];b('a[href^="http://www.youtube"]').each(function(){var d=this.href.replace(/^.*v=/,"").replace(/\&.*$/,"");b.inArray(d,c)<0&&c.push(d)});console.log("video ids",c);var a=0,f=function(){a++;if(a>=c.length)a-=c.length},g=function(){b("#shadow, #player_box").remove();b(document).unbind("keyup.player")};b(document).bind("keyup.player",function(d){d.keyCode==27&&g()});var e=null,h=function(){console.log("Playing: ",a,c[a]);e.loadVideoById(c[a])},i=b("<div />",{id:"shadow",css:{"background-color":"black",
position:"fixed",left:0,top:0,width:"100%",height:"100%","z-index":1E3},click:g}),j=b("<div />",{id:"player_box",css:{position:"fixed",left:"50%",top:"50%",width:320,height:240,"margin-left":-160,"margin-top":-120,"z-index":1001}}),k=b("<div />",{id:"playlist_player"}),l=b("<a />",{href:"javascript:;",text:"previous",css:{"float":"left"},click:function(){a--;if(a<0)a+=c.length;h()}}),m=b("<a />",{href:"javascript:;",text:"next",css:{"float":"right"},click:function(){f();h()}});j.append(k).append(l).append(m);
b("body").append(i).append(j);i.css("opacity",0.8);swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid=playlist_player","playlist_player","320","240","9.0.0",null,null,{allowScriptAccess:"always"},{id:"playlist_player"});window.onYouTubePlayerReady=function(d){e=document.getElementById(d);e.addEventListener("onStateChange","playerStateChanged");e.addEventListener("onError","playerOnError");h()};window.playerOnError=function(d){console.log("error",d)};window.playerStateChanged=
function(d){if(d==0){f();h()}}})})(jQuery.noConflict(true))})})();
